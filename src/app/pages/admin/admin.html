<!-- src/app/pages/admin/admin.component.html -->
<div class="admin-page">
  <!-- Admin Header -->
  <div class="admin-header">
    <div class="container">
      <div class="header-content">
        <div>
          <h1>YÃ¶netici Paneli</h1>
          <p class="subtitle">Platform yÃ¶netimi ve Ã¼rÃ¼n onaylarÄ±</p>
        </div>
        <div class="admin-actions">
          <button class="btn btn-outline" (click)="refreshData()">
            <span class="btn-icon">ğŸ”„</span>
            Yenile
          </button>
          <button class="btn btn-primary" (click)="exportData()">
            <span class="btn-icon">ğŸ“Š</span>
            Rapor Al
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <div class="container">
    <!-- Stats Overview -->
    <div class="stats-overview">
      <div class="stat-card">
        <div class="stat-icon">ğŸ“¦</div>
        <div class="stat-content">
          <div class="stat-value">{{stats.totalProducts}}</div>
          <div class="stat-label">Toplam ÃœrÃ¼n</div>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">â³</div>
        <div class="stat-content">
          <div class="stat-value">{{stats.pendingApproval}}</div>
          <div class="stat-label">Onay Bekleyen</div>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">ğŸ‘¤</div>
        <div class="stat-content">
          <div class="stat-value">{{stats.totalUsers}}</div>
          <div class="stat-label">Toplam KullanÄ±cÄ±</div>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">ğŸšš</div>
        <div class="stat-content">
          <div class="stat-value">{{stats.shippedToday}}</div>
          <div class="stat-label">BugÃ¼n Kargolanan</div>
        </div>
      </div>
    </div>

    <!-- Tabs Navigation -->
    <div class="admin-tabs">
      <div class="tabs-header">
        <button 
          class="tab-btn" 
          [class.active]="activeTab === 'pending'"
          (click)="setActiveTab('pending')">
          Onay Bekleyen ÃœrÃ¼nler
          <span class="tab-badge">{{pendingProducts.length}}</span>
        </button>
        <button 
          class="tab-btn" 
          [class.active]="activeTab === 'users'"
          (click)="setActiveTab('users')">
          KullanÄ±cÄ±lar
          <span class="tab-badge">{{users.length}}</span>
        </button>
        <button 
          class="tab-btn" 
          [class.active]="activeTab === 'reports'"
          (click)="setActiveTab('reports')">
          Raporlar
        </button>
        <button 
          class="tab-btn" 
          [class.active]="activeTab === 'settings'"
          (click)="setActiveTab('settings')">
          Ayarlar
        </button>
      </div>

      <!-- Tab Content -->
      <div class="tab-content">
        <!-- Pending Products Tab -->
        <div *ngIf="activeTab === 'pending'" class="tab-pane">
          <div class="table-responsive">
            <table class="admin-table">
              <thead>
                <tr>
                  <th>ÃœrÃ¼n</th>
                  <th>BaÄŸÄ±ÅŸÃ§Ä±</th>
                  <th>Kategori</th>
                  <th>Durum</th>
                  <th>Tarih</th>
                  <th>Ä°ÅŸlemler</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let product of pendingProducts" class="table-row">
                  <td class="product-cell">
                    <div class="product-info">
                      <div class="product-image">
                        <img [src]="product.images[0] || 'assets/images/default-product.jpg'" [alt]="product.name">
                      </div>
                      <div class="product-details">
                        <strong>{{product.name}}</strong>
                        <p class="product-description">{{truncateText(product.description, 60)}}</p>
                      </div>
                    </div>
                  </td>
                  <td>
                    <div class="user-cell">
                      <div class="user-avatar">{{product.donorName.charAt(0)}}</div>
                      <div>
                        <div>{{product.donorName}}</div>
                        <small>{{product.donorCity}}</small>
                      </div>
                    </div>
                  </td>
                  <td>
                    <span class="category-badge">{{product.category}}</span>
                  </td>
                  <td>
                    <span class="status-badge pending">Onay Bekliyor</span>
                  </td>
                  <td>
                    {{formatDate(product.createdAt)}}
                  </td>
                  <td>
                    <div class="action-buttons">
                      <button class="btn btn-sm btn-success" (click)="approveProduct(product)">
                        <span class="btn-icon">âœ“</span>
                        Onayla
                      </button>
                      <button class="btn btn-sm btn-outline" (click)="viewProductDetails(product)">
                        <span class="btn-icon">ğŸ‘ï¸</span>
                        Detay
                      </button>
                      <button class="btn btn-sm btn-danger" (click)="rejectProduct(product)">
                        <span class="btn-icon">âœ—</span>
                        Reddet
                      </button>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>

          <!-- Empty State -->
          <div *ngIf="pendingProducts.length === 0" class="empty-state">
            <div class="empty-icon">âœ…</div>
            <h3>Onay bekleyen Ã¼rÃ¼n bulunmuyor</h3>
            <p>TÃ¼m Ã¼rÃ¼nler onaylandÄ±</p>
          </div>
        </div>

        <!-- Users Tab -->
        <div *ngIf="activeTab === 'users'" class="tab-pane">
          <div class="table-responsive">
            <table class="admin-table">
              <thead>
                <tr>
                  <th>KullanÄ±cÄ±</th>
                  <th>Tip</th>
                  <th>BaÄŸÄ±ÅŸ SayÄ±sÄ±</th>
                  <th>Son GiriÅŸ</th>
                  <th>Durum</th>
                  <th>Ä°ÅŸlemler</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let user of users" class="table-row">
                  <td>
                    <div class="user-cell">
                      <div class="user-avatar">{{user.name.charAt(0)}}</div>
                      <div>
                        <div>{{user.name}}</div>
                        <small>{{user.email}}</small>
                      </div>
                    </div>
                  </td>
                  <td>
                    <span [class]="'user-type-badge ' + user.type">
                      {{user.type === 'donor' ? 'BaÄŸÄ±ÅŸÃ§Ä±' : 'AlÄ±cÄ±'}}
                    </span>
                  </td>
                  <td>
                    {{user.donationCount}}
                  </td>
                  <td>
                    {{formatDate(user.lastLogin)}}
                  </td>
                  <td>
                    <span [class]="'status-badge ' + (user.isActive ? 'active' : 'inactive')">
                      {{user.isActive ? 'Aktif' : 'Pasif'}}
                    </span>
                  </td>
                  <td>
                    <div class="action-buttons">
                      <button class="btn btn-sm btn-outline" (click)="viewUserProfile(user)">
                        Profil
                      </button>
                      <button 
                        class="btn btn-sm" 
                        [class]="user.isActive ? 'btn-warning' : 'btn-success'"
                        (click)="toggleUserStatus(user)">
                        {{user.isActive ? 'Devre DÄ±ÅŸÄ± BÄ±rak' : 'Aktif Et'}}
                      </button>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- Reports Tab -->
        <div *ngIf="activeTab === 'reports'" class="tab-pane">
          <div class="reports-grid">
            <div class="report-card">
              <h3>ğŸ“ˆ AylÄ±k Ä°statistikler</h3>
              <div class="report-content">
                <div class="report-item">
                  <span>Toplam BaÄŸÄ±ÅŸ:</span>
                  <strong>247</strong>
                </div>
                <div class="report-item">
                  <span>Yeni KullanÄ±cÄ±:</span>
                  <strong>42</strong>
                </div>
                <div class="report-item">
                  <span>Tamamlanan Teslimat:</span>
                  <strong>189</strong>
                </div>
                <div class="report-item">
                  <span>Ortalama Onay SÃ¼resi:</span>
                  <strong>1.5 gÃ¼n</strong>
                </div>
              </div>
            </div>

            <div class="report-card">
              <h3>ğŸ† En Aktif BaÄŸÄ±ÅŸÃ§Ä±lar</h3>
              <div class="report-content">
                <div *ngFor="let donor of topDonors" class="donor-item">
                  <div class="donor-info">
                    <div class="donor-avatar">{{donor.name.charAt(0)}}</div>
                    <div>
                      <div>{{donor.name}}</div>
                      <small>{{donor.city}}</small>
                    </div>
                  </div>
                  <span class="donor-count">{{donor.count}} baÄŸÄ±ÅŸ</span>
                </div>
              </div>
            </div>

            <div class="report-card">
              <h3>ğŸ“ Åehir BazlÄ± DaÄŸÄ±lÄ±m</h3>
              <div class="report-content">
                <div *ngFor="let city of cityDistribution" class="city-item">
                  <span>{{city.name}}</span>
                  <div class="city-bar">
                    <div class="bar-fill" [style.width.%]="city.percentage"></div>
                  </div>
                  <span>{{city.count}}</span>
                </div>
              </div>
            </div>
          </div>

          <div class="report-actions">
            <button class="btn btn-outline" (click)="generateMonthlyReport()">
              ğŸ“… AylÄ±k Rapor OluÅŸtur
            </button>
            <button class="btn btn-outline" (click)="exportToExcel()">
              ğŸ“Š Excel'e Aktar
            </button>
            <button class="btn btn-primary" (click)="printReport()">
              ğŸ–¨ï¸ Raporu YazdÄ±r
            </button>
          </div>
        </div>

        <!-- Settings Tab -->
        <div *ngIf="activeTab === 'settings'" class="tab-pane">
          <div class="settings-grid">
            <div class="settings-card">
              <h3>âš™ï¸ Platform AyarlarÄ±</h3>
              <div class="settings-form">
                <div class="form-group">
                  <label class="form-label">Otomatik Onay</label>
                  <div class="toggle-switch">
                    <input type="checkbox" id="autoApprove" [(ngModel)]="settings.autoApprove">
                    <label for="autoApprove" class="toggle-slider"></label>
                  </div>
                  <div class="form-hint">GÃ¼venilir kullanÄ±cÄ±larÄ±n Ã¼rÃ¼nlerini otomatik onayla</div>
                </div>

                <div class="form-group">
                  <label class="form-label">Maksimum GÃ¼nlÃ¼k BaÄŸÄ±ÅŸ</label>
                  <input 
                    type="number" 
                    class="form-control" 
                    [(ngModel)]="settings.maxDailyDonations"
                    min="1"
                    max="10">
                  <div class="form-hint">Bir kullanÄ±cÄ±nÄ±n gÃ¼nlÃ¼k maksimum baÄŸÄ±ÅŸ sayÄ±sÄ±</div>
                </div>

                <div class="form-group">
                  <label class="form-label">E-posta Bildirimleri</label>
                  <div class="toggle-switch">
                    <input type="checkbox" id="emailNotifications" [(ngModel)]="settings.emailNotifications">
                    <label for="emailNotifications" class="toggle-slider"></label>
                  </div>
                  <div class="form-hint">KullanÄ±cÄ±lara iÅŸlem bildirimleri gÃ¶nder</div>
                </div>

                <button class="btn btn-primary" (click)="saveSettings()">
                  AyarlarÄ± Kaydet
                </button>
              </div>
            </div>

            <div class="settings-card">
              <h3>ğŸ”” Bildirim AyarlarÄ±</h3>
              <div class="notifications-list">
                <div class="notification-item">
                  <div class="notification-content">
                    <strong>Yeni Ã¼rÃ¼n onayÄ±</strong>
                    <p>Onay bekleyen Ã¼rÃ¼n olduÄŸunda bildirim gÃ¶nder</p>
                  </div>
                  <div class="toggle-switch small">
                    <input type="checkbox" id="notif1" checked>
                    <label for="notif1" class="toggle-slider"></label>
                  </div>
                </div>
                <div class="notification-item">
                  <div class="notification-content">
                    <strong>Kargo gÃ¼ncellemesi</strong>
                    <p>Kargo durumu deÄŸiÅŸtiÄŸinde bildirim gÃ¶nder</p>
                  </div>
                  <div class="toggle-switch small">
                    <input type="checkbox" id="notif2" checked>
                    <label for="notif2" class="toggle-slider"></label>
                  </div>
                </div>
                <div class="notification-item">
                  <div class="notification-content">
                    <strong>HaftalÄ±k rapor</strong>
                    <p>Her hafta platform istatistiklerini gÃ¶nder</p>
                  </div>
                  <div class="toggle-switch small">
                    <input type="checkbox" id="notif3">
                    <label for="notif3" class="toggle-slider"></label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Loading -->
    <div *ngIf="isLoading" class="loading">
      <div class="spinner"></div>
      <p>YÃ¼kleniyor...</p>
    </div>
  </div>
</div>